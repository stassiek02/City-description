(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{25:function(n,t,e){n.exports=e(38)},38:function(n,t,e){"use strict";e.r(t);var r=e(0),a=e.n(r),i=e(19),o=e.n(i),c=e(3),u=e.n(c),s=e(11),l=e(22),f=e(5),p=e(6),g=e(9),d=e(8),h=e(7),m=e(10),b=e(1),v=e(2),y=e(4),x=e.n(y);function j(){var n=Object(b.a)(["\n  border: 2px solid #16a085;\n  font-size: 1.7rem;\n  margin: 0;\n  padding: 20px;\n  width: 200px;\n  height: 20px;\n  margin-bottom: 10px;\n  font-weight: 500;\n  & ~ ul {\n    margin-bottom: 0;\n  }\n"]);return j=function(){return n},n}function w(){var n=Object(b.a)(["\n  width: 200px;\n  padding: 10px 15px;\n  background-color: #f2f2f2;\n  transition: 0.2s background-color;\n\n  &:focus,\n  &:hover {\n    background-color: #16a085;\n  }\n  &:last-child {\n    margin-bottom: 30px;\n  }\n"]);return w=function(){return n},n}function O(){var n=Object(b.a)(["\n  list-style: none;\n  margin-top: -10px;\n  padding: 0;\n"]);return O=function(){return n},n}var S=v.b.ul(O()),k=v.b.li(w()),E=v.b.input(j()),C=function(n){function t(){var n,e;Object(f.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=Object(g.a)(this,(n=Object(d.a)(t)).call.apply(n,[this].concat(a)))).state={activeSuggestion:0,filteredSuggestions:[],showSuggestions:!1,userInput:""},e.onSuggestionClick=function(n){e.setState({activeSuggestion:0,filteredSuggestions:[],showSuggestions:!1,userInput:n.currentTarget.innerText},function(){return e.props.afterSubmit(e.state.userInput,n)}),x.a.set("LastSearch",n.currentTarget.innerText)},e.onChange=function(n){var t=e.props.suggestions,r=n.currentTarget.value,a=t.filter(function(n){return n.toLowerCase().indexOf(r.toLowerCase())>-1});e.setState({activeSuggestion:0,filteredSuggestions:a,showSuggestions:!0,userInput:n.currentTarget.value})},e}return Object(m.a)(t,n),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.setState({userInput:x.a.get("LastSearch")||""})}},{key:"render",value:function(){var n,t=this.onChange,e=this.onSuggestionClick,r=this.onKeyDown,i=this.state,o=i.filteredSuggestions,c=i.showSuggestions,u=i.userInput;return c&&u&&(n=a.a.createElement(S,null,o.map(function(n,t){return a.a.createElement(k,{key:t,onClick:e},n)}))),a.a.createElement(a.a.Fragment,null,a.a.createElement(E,{type:"text",onChange:t,value:u,placeholder:"Write your country",onKeyDown:r,autocomplete:"off"}),n)}}]),t}(r.Component);C.defaultProperty={suggestions:[]};var L=C,I=e(16);function z(){var n=Object(b.a)(['\n  font-family: "Open Sans", sans-serif;\n  font-weight: 400;\n  font-size: 14px;\n  padding: 18px;\n  margin-left:20px;\n']);return z=function(){return n},n}function D(){var n=Object(b.a)(["\n  background-color: white;\n  overflow: hidden;\n  transition: max-height 0.6s ease;\n  \n"]);return D=function(){return n},n}function P(){var n=Object(b.a)(['\n  font-family: "Open Sans", sans-serif;\n  font-weight: ',";\n  font-size: 1.8rem;\n"]);return P=function(){return n},n}function T(){var n=Object(b.a)(["\n  background-color: ",";\n  color: #ecf0f1;\n  cursor: pointer;\n  padding: 18px;\n  display: flex;\n  align-items: center;\n  border:0;\n  border-bottom:1px solid white;\n  outline: none;\n  transform: translateX(\n    ","\n  );\n  transition: background-color 0.4s ease, transform 0.6s ease;\n  &:hover {\n    background-color: #1abc9c;\n  }\n  \n"]);return T=function(){return n},n}function A(){var n=Object(b.a)(["\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n"]);return A=function(){return n},n}var F=v.b.div(A()),U=v.b.button(T(),function(n){return"active"===n.setActive?"#27ae60":"#2ecc71"},function(n){return"active"===n.setActive?"20px":"0"}),M=v.b.p(P(),function(n){return n.theme.bold}),W=v.b.div(D()),G=v.b.p(z());function H(n){var t=Object(r.useState)(""),e=Object(I.a)(t,2),i=e[0],o=e[1],c=Object(r.useState)("0px"),u=Object(I.a)(c,2),s=u[0],l=u[1],f=Object(r.useRef)(null);return a.a.createElement(F,null,a.a.createElement(U,{onClick:function(){o(""===i?"active":""),l("active"===i?"0px":"".concat(f.current.scrollHeight,"px"))},setActive:i},a.a.createElement(M,null,n.title)),a.a.createElement(W,{ref:f,style:{maxHeight:"".concat(s)}},a.a.createElement(G,null," ",n.content)))}H.defaultProps={title:"",content:""};var J=H;function K(){var n=Object(b.a)(["\n  @import url('https://fonts.googleapis.com/css?family=Montserrat:300,600,500');\n  \n  *, *::before, *::after {\n    box-sizing: border-box;\n    -webkit-font-smoothing: antialiased;\n    -moz-osx-font-smoothing: grayscale;\n  }\n  \n  html {\n    font-size: 62.5%; \n  }\n  \n  body {\n    font-size: 1.6rem;\n    font-family: \"Montserrat\", sans-serif;\n  }\n"]);return K=function(){return n},n}var R=Object(v.a)(K());function _(){var n=Object(b.a)(["\n  max-width: 600px;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: flex-end;\n"]);return _=function(){return n},n}function q(){var n=Object(b.a)(["\n  margin: 0;\n  padding: 0;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n"]);return q=function(){return n},n}var B={Spain:"ES",Poland:"PL",Germany:"DE",France:"FR"},X=v.b.div(q()),N=v.b.div(_()),Q=function(n){function t(){var n,e;Object(f.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=Object(g.a)(this,(n=Object(d.a)(t)).call.apply(n,[this].concat(a)))).state={cities:[],country:"",isLoaded:null},e.getUserInput=e.getUserInput.bind(Object(h.a)(e)),e}return Object(m.a)(t,n),Object(p.a)(t,[{key:"componentDidMount",value:function(){var n=x.a.get("LastSearch");n&&this.getUserInput(n)}},{key:"filterCities",value:function(n){var t=this,e=Object(l.a)(new Set(n.map(function(n){return n.city.split("/")[0]}))).slice(0,10);this.setState({cities:e},function(){return t.getWikiDescription(t.state)})}},{key:"getUserInput",value:function(n){var t=this;this.setState({country:n},function(){return t.getCities()})}},{key:"getCities",value:function(){var n=Object(s.a)(u.a.mark(function n(){var t=this;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch("https://api.openaq.org/v1/measurements?limit=200&parameter=pm25&order_by=value&sort=desc&country="+B[this.state.country]).then(function(n){return n.json()}).then(function(n){return t.filterCities(n.results)}).catch(function(n){return console.error("Error:",n)});case 2:case"end":return n.stop()}},n,this)}));return function(){return n.apply(this,arguments)}}()},{key:"getWikiDescription",value:function(){var n=Object(s.a)(u.a.mark(function n(t){var e,r=this;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:this.setState({isLoaded:!1}),e=t.cities.map(function(){var n=Object(s.a)(u.a.mark(function n(t){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",fetch("".concat("https://cors-anywhere.herokuapp.com/","https://en.wikipedia.org/api/rest_v1/page/summary/").concat(t)).then(function(n){return n.json()}).then(function(n){return n.extract}).catch(function(n){return console.error("Error:",n)}));case 1:case"end":return n.stop()}},n)}));return function(t){return n.apply(this,arguments)}}()),Promise.all(e).then(function(n){return r.setState({desc:n,isLoaded:!0})});case 3:case"end":return n.stop()}},n,this)}));return function(t){return n.apply(this,arguments)}}()},{key:"rednerList",value:function(){var n=this,t=this.state,e=t.desc,r=t.isLoaded,i=this.state.cities;return e&&r?i.map(function(t,e){return a.a.createElement(J,{title:t,content:n.state.desc[e],key:e})}):a.a.createElement("span",null,"Loading")}},{key:"render",value:function(){var n=this.state.isLoaded;return a.a.createElement(a.a.Fragment,null,a.a.createElement(R,null),a.a.createElement(X,null,a.a.createElement(N,null,a.a.createElement(L,{suggestions:["Spain","Poland","Germany","France"],afterSubmit:this.getUserInput})),a.a.createElement(N,null,null!==n?this.rednerList():null)))}}]),t}(r.Component);o.a.render(a.a.createElement(Q,null),document.getElementById("root"))}},[[25,1,2]]]);
//# sourceMappingURL=main.8ec06a43.chunk.js.map